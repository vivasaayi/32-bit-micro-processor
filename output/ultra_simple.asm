; Generated by Simple C Compiler
; Custom RISC Assembly Output

    ; Runtime support functions
malloc:
    ; Simple malloc - returns fixed heap addresses
    LOAD R1, heap_ptr
    ADD R2, R1, R0
    STORE R2, heap_ptr
    MOVE R0, R1
    RET

putchar:
    ; Output character in r0
    OUT R0
    RET

strlen:
    ; String length - string pointer in r0
    MOVE R1, R0
    MOVE R0, #0
strlen_loop:
    LOAD R2, [R1]
    CMP R2, #0
    JZ strlen_end
    ADD R0, R0, #1
    ADD R1, R1, #1
    JMP strlen_loop
strlen_end:
    RET

; Data section
heap_ptr: .word 0x10000

    ; Compound statement
    ; Function declaration
main:
    ; WARNING: Unknown instruction: push
    push fp
    MOVE R29, R30
    SUB R30, R30, #64
    ; Compound statement
    ; Variable declaration
; Array stack[10] allocated (40 bytes)
    ; Array base address for stack
    ; Variable declaration
; Variable sp allocated
    MOVE R1, #0
    ; Store initializer value for sp
    MOVE R1, #5
    ; Store to array element
    ; Undefined symbol
    MOVE R2, #0
    ; Undefined symbol
    MOVE R3, #0
    MUL R3, R3, #4
    ADD R2, R2, R3
    STORE R1, [R2]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    ADD R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    MOVE R1, #3
    ; Store to array element
    ; Undefined symbol
    MOVE R2, #0
    ; Undefined symbol
    MOVE R3, #0
    MUL R3, R3, #4
    ADD R2, R2, R3
    STORE R1, [R2]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    ADD R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    MOVE R1, #2
    ; Store to array element
    ; Undefined symbol
    MOVE R2, #0
    ; Undefined symbol
    MOVE R3, #0
    MUL R3, R3, #4
    ADD R2, R2, R3
    STORE R1, [R2]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    ADD R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    SUB R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Variable declaration
; Variable b allocated
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R2, R2, #4
    ADD R1, R1, R2
    LOAD R1, [R1]
    ; Store initializer value for b
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    SUB R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Variable declaration
; Variable a allocated
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R2, R2, #4
    ADD R1, R1, R2
    LOAD R1, [R1]
    ; Store initializer value for a
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R1, R1, R2
    ; Store to array element
    ; Undefined symbol
    MOVE R2, #0
    ; Undefined symbol
    MOVE R3, #0
    MUL R3, R3, #4
    ADD R2, R2, R3
    STORE R1, [R2]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    ADD R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    SUB R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R2, R2, #4
    ADD R1, R1, R2
    LOAD R1, [R1]
    ; Store to variable b
    STORE R1, [b]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    SUB R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R2, R2, #4
    ADD R1, R1, R2
    LOAD R1, [R1]
    ; Store to variable a
    STORE R1, [a]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    ADD R1, R1, R2
    ; Store to array element
    ; Undefined symbol
    MOVE R2, #0
    ; Undefined symbol
    MOVE R3, #0
    MUL R3, R3, #4
    ADD R2, R2, R3
    STORE R1, [R2]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    ADD R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Undefined symbol
    MOVE R1, #0
    MOVE R2, #1
    SUB R1, R1, R2
    ; Store to variable sp
    STORE R1, [R30]
    MOVE R0, R1
    ; Return statement
    ; Undefined symbol
    MOVE R1, #0
    ; Undefined symbol
    MOVE R2, #0
    MUL R2, R2, #4
    ADD R1, R1, R2
    LOAD R0, [R1]
    ADD R30, R30, #64
    ; WARNING: Unknown instruction: pop
    pop fp
    RET
main_end:
    ADD R30, R30, #64
    ; WARNING: Unknown instruction: pop
    pop fp
    RET


; Program entry point
_start:
    CALL main
    HALT
